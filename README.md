## 1. Введение
Лабораторная работа 1 - вариант M2.
Данная программа предназначена для вычисления арифметических выражений. Вычисление происходит в три последовательных этапа:

1. **Токенизация** - преобразование входной строки в список токенов

2. **Преобразование в обратную польскую запись (RPN)** - перевод выражения в постфиксную форму

3. **Вычисление** - расчет результата по обратной польской записи

### Запуск программы
Основная программа находится в файле `main.py` в папке `src`.
После запуска программа перейдет в интерактивный режим и будет ожидать ввод арифметических выражений для вычисления.

### Запуск тестов

Для проверки корректности работы программы предусмотрены тесты. Запуск тестов осуществляется через файл `test_calculator.py` в папке `tests`. Тесты проверяют корректность работы программы и обработки ею различных ошибок.

## 2. Функциональные возможности

### Поддерживаемые операции:

- Бинарные операторы: `+`, `-`, `*`, `/`, `//`, `%`, `**`, `^`

- Унарные операторы: `+`, `-`

- Скобки: `(`, `)`


### Особенности:

- Использование как точки, так и запятой в качестве десятичного разделителя

- Поддержка ведущих нулей (например, `0005`)

- Числа с нулевой целой частью (например, `.5` или `,5`)

- Произвольное количество пробелов между элементами или их отсутствие

- Два варианта написания операторов: `**` или `^` для степени, `//` для целочисленного деления

- Произвольное количество скобок, если они синтаксически корректны

- Возведение 0 в степень 0 дает 1

- Унарные операторы перед числами или скобками


## 3. Описание алгоритма

### 3.1. Этап токенизации

Программа посимвольно читает входную строку и формирует список токенов. Числа считываются в отдельную переменную, накапливая цифры и десятичные точки, и добавляются в список токенов только при встрече не-числового символа.

**Обнаружение синтаксических ошибок:**

1. Оператор после оператора (например: `"1 + + 3"`)

2. Неверный унарный оператор (например: `"* 3 + 1"`)

3. Оператор в конце выражения (например: `"1 + 3 +"`)

4. Число после числа (например: `"1 1 + 3"`)

5. Число после закрывающей скобки (например: `"(1 + 3) 1"`)

6. Число перед открывающей скобкой (например: `"1 (1 + 3)"`)

7. Лишняя закрывающая скобка (например: `"1 + 3)"`)

8. Недостающая закрывающая скобка (например: `"(1 + 3"`)

9. Открывающая скобка после закрывающей (например: `"(1 + 3)(1 + 3)"`)

10. Число оканчивается на точку (например: `"1. + 3"`)

11. Пустое выражение (`""`)

12. Пустое выражение внутри скобок (например: `"1 + ()"`)

13. Вторая точка в числе (например: `"1.1.1 + 3"`)

14. Неизвестный символ (например: `"1s + 3"`)

15. Написание двухсимвольного оператора через пробел (например: `"1 / / 3"`)


### 3.2. Преобразование в обратную польскую запись (RPN)

Используется классический алгоритм сортировочной станции (Shunting Yard algorithm). Алгоритм предполагает, что входное выражение синтаксически корректно, поэтому дополнительная проверка ошибок на этом этапе не производится.

**Особенности реализации:**

- Учет правой ассоциативности оператора степени (`**`, `^`)

- Корректная обработка унарных операторов

- Правильное распределение приоритетов операций


### 3.3. Вычисление выражения в RPN

Для вычисления используется стековый алгоритм. Программа предполагает, что полученные данные являются корректным выражением в RPN.

**Обнаружение вычислительных ошибок:**

1. Деление на ноль

2. Операции поиска остатка от деления или целочисленного деления с дробными числами

3. Возведение отрицательного числа в нецелую степень


## 4. Руководство пользователя

### Запуск программы:

Программа запускается выполнением основного файла. После запуска программа ожидает ввод арифметического выражения.

### Примеры корректного ввода:

- `2 + 2 * 2`

- `-5 + (3.5)`

- `10 / 3`

- `2 ** 3 ** 2` (учитывается правая ассоциативность)

- `5 * (-2 + 3)`

- `1 + ,5 * 2`


### Примеры ошибочного ввода и реакция программы:

- `1 + + 2` → `Ошибка: Оператор после оператора`

- `1 / 0` → `Ошибка: Деление на ноль`

- `1.5 // 2` → `Ошибка: Целочисленное деление применимо только к целым числам`

- `(-2) ** 0.5` → `Ошибка: Возведение отрицательного числа в нецелую степень`

- `1 + ()` → `Ошибка: Пустое выражение внутри скобок`


## 5. Обработка ошибок

### Синтаксические ошибки:

Обнаруживаются на этапе токенизации. Программа прерывает выполнение и выводит соответствующее сообщение об ошибке.

### Вычислительные ошибки:

Обнаруживаются на этапе вычисления RPN. Программа прерывает выполнение и выводит соответствующее сообщение об ошибке.
